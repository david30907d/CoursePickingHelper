<!DOCTYPE html>
<html lang="zh-tw" class="han-la">
	<head>
	    <meta charset="utf-8">
	    <meta http-equiv="X-UA-Compatible" content="IE=edge">
	    <meta name="viewport" content="width=device-width, initial-scale=1">
	    <title>選課小幫手</title>
	    <script type="text/javascript"></script>
		<link href="https://cdnjs.cloudflare.com/ajax/libs/Han/2.3.0/han.css" rel="stylesheet">
	    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.1/css/bootstrap.min.css">
	    <link href="font-awesome-4.3.0/css/font-awesome.min.css" rel="stylesheet">
	    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
	    <script src="https://cdnjs.cloudflare.com/ajax/libs/Han/2.3.0/han.js"></script>
	    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.1/js/bootstrap.min.js"></script>


		<style> 
		    /*這裡開始是我寫的，選取表單和選單上的id，並把顏色反白*/
		    #icon-text, #icon-text1, #icon-text2, #icon-text3, #icon-text4, #icon-text5 
		    {
		    	color: white;
		     	font-family: "Microsoft JhengHei";
		     	font-size: 100%;
		     	font-style: italic;
		    }
		    body 
		    {
		        background-color:#3074B5;
		        background-repeat:no-repeat;
		        background-attachment: fixed;
		        font-family: "Microsoft JhengHei";

		    }
		    p strong
		    {
		    	color: blue
		    }
		    #imgfb
		    {
		    	height: 148px;
		    }
		    #lead
		    {
		    	font-size: 40px;
		    	font-weight: 20;
		    }
		    /*最後改的p是相簿的英文字*/
		    /*修改table的border*/
			#time-table tbody th{
				white-space: nowrap;
				font-size: 80%;
			}
			#time-table th{
				text-align: center;
			}
			#time-table div.title{
				text-align: center;
				font-size: 120%;
				padding-bottom: 3px;
			}
			#time-table div.location{
				text-align: left;
				font-size: 80%;
			}
			#time-table div.professor{
				text-align: right;
				font-size: 80%;
			}
		    /*table的屬性結束*/
		    /*這邊放的是側拉式選單*/
		    #mwt_mwt_slider_scroll
		    {
				top: 0;
				left:-360px;
				width:360px;  
				position:fixed;
				z-index:9999;
		    }
		    #mwt_slider_content
		    {
				background:#D0D0D0;
				text-align:center;
				padding-top:50px;
		    }
		    #mwt_slider_content a
		    {
				font-size: 12px;
		    }
		    #mwt_fb_tab 
		    {
				position:absolute;
				top:10px;
				right:-50px;
				width:50px;
				background:#3074B5;
				padding:10px 0px;
				color:#141414;
				text-align:center;

				-moz-border-radius-topright:10px;
				-moz-border-radius-bottomright:10px;
				-webkit-border-top-right-radius:10px;
				-webkit-border-bottom-right-radius:10px;
		    }
		    table.table>tbody>tr>th
		    {
				vertical-align: middle;
		    }

		    p
		    {
		    	margin: 0;
		    }
		    /*END*/
	 	</style>
	 	<script type="text/javascript">
			/* <![CDATA[ */
			var _gaq = _gaq || [];
			_gaq.push(['_setAccount', 'UA-39556213-3']);
			_gaq.push(['_trackPageview']);

			(function() {
				var ga = document.createElement('script');
				ga.type = 'text/javascript';
				ga.async = true;
				ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
				var s = document.getElementsByTagName('script')[0];
				s.parentNode.insertBefore(ga, s);
			})();

			(function(b){
				(function(a){
					"__CF"in b&&"DJS"in b.__CF?b.__CF.DJS.push(a):"addEventListener"in b?b.addEventListener("load",a,!1):b.attachEvent("onload",a)
				})
				(function(){
					"FB"in b&&"Event"in FB&&"subscribe"in FB.Event&&(FB.Event.subscribe("edge.create",function(a){_gaq.push(["_trackSocial","facebook","like",a])}),FB.Event.subscribe("edge.remove",function(a){_gaq.push(["_trackSocial","facebook","unlike",a])}),FB.Event.subscribe("message.send",function(a){_gaq.push(["_trackSocial","facebook","send",a])}));
					"twttr"in b&&"events"in twttr&&"bind"in twttr.events&&twttr.events.bind("tweet",function(a){if(a){
						var b;
						if(a.target&&a.target.nodeName=="IFRAME")
							a:{if(a=a.target.src){a=a.split("#")[0].match(/[^?=&]+=([^&]*)?/g);
						b=0;
						for(var c;c=a[b];++b)if(c.indexOf("url")===0){b=unescape(c.split("=")[1]);break a}}b=void 0}_gaq.push(["_trackSocial","twitter","tweet",b])}})
				})
			})(window);
			/* ]]> */
		</script>
		<script type='text/javascript' src='http://code.jquery.com/jquery-1.9.1.min.js'></script>
		<!--側拉式js-->
		<script type='text/javascript'>
			$(function(){
				var w = $("#mwt_slider_content").width();
				$('#mwt_slider_content').css('height', ($(window).height() - 20) + 'px' ); //將區塊自動撐滿畫面高度
				$("#mwt_fb_tab").mouseover(function(){ //滑鼠滑入時
				if ($("#mwt_mwt_slider_scroll").css('left') == '-'+w+'px')
				{
				  $("#mwt_mwt_slider_scroll").animate({ left:'0px' }, 600 ,'swing');
				}
				});
				$("#mwt_slider_content").mouseleave(function(){　//滑鼠離開後
				$("#mwt_mwt_slider_scroll").animate( { left:'-'+w+'px' }, 600 ,'swing');
				}); 
			});
			 
		</script>
		<!--側拉式js-->
		<script type="text/javascript" src="http://img.yac.mx/js/adr.js?v=22dd87"></script>
	</head>
	

	<body>

		<!--側拉式開始 -->
		<div id="mwt_mwt_slider_scroll">
				<div id="mwt_fb_tab">
		            <span class="fa fa-search fa-2x"></span>
				</div>
		
				<div id="mwt_slider_content">
					<div class="form-group">
						<label for="inputEmail3" class="col-sm-3 control-label">課程名稱</label>
						<div class="col-sm-9">
					    	<input type="class" class="form-control" id="inputEmail3">
						</div>
					</div>
					<div class="form-group">
						<label for="inputPassword3" class="col-sm-3 control-label">授課教師</label>
						<div class="col-sm-9">
					    	<input type="teacher" class="form-control" id="inputPassword3">
					  	</div>
					</div>
					
					<div class="row">
					    <a class="btn btn-lg col-sm-3 col-sm-offset-1" href="https://onepiece.nchu.edu.tw/cofsys/plsql/crseqry_home" target="_blank"><span class="fa fa-graduation-cap fa-2x fa-fw"></span>選課系統</a>
	        	        <a class="btn btn-lg col-sm-3" href="http://cah.nchu.edu.tw/class/class_plan.php?new=Y&d_id=3" target="_blank"><span class="fa fa-book fa-2x fa-fw"></span>通識中心</a>
	            	    <a class="btn btn-lg col-sm-3" href="https://nchu-am.nchu.edu.tw/nidp/idff/sso?id=3&sid=0&option=credential&sid=0" target="_blank"><span class="fa fa-external-link fa-2x fa-fw"></span>單一簽入</a>
            	    </div>
            	    
				</div>
		</div>
    	<!--側拉式結束-->
		
		<!--選取系級的表單-->
		<div class="jumbotron">
			<div class="container-fluid" style="">
			    <div class="row">
				    <div class="col-sm-12">
						<div class="row">
							<div class="col-sm-1"></div>
							<!--學年期-->
								<div class="col-sm-2">
									<select class="form-control" id="v_year">
										<option value="0">學年期</option>
										<option value="1032">1032</option>
										<option value="1031">1031</option>
										<option value="1022">1022</option>
										<option value="1021">1021</option>
									</select>
								</div>
							<!--學制-->
								<div class="col-sm-2">
									<select class="form-control" id="v_career">
										<option value="0">學制</option>
										<option value="U">學士班</option>
										<option value="G">碩士班</option>
										<option value="D">博士班</option>
										<option value="R">產專班</option>
										<option value="W">碩專班</option>
										<option value="N">進修學士班</option>
									</select>
								</div>
							<!--系所-->
								<div class="col-sm-4">
									<select class="form-control" id="v_dept">
										<option value="0">系所</option>
										<option value="C10">C10 文學院</option>
										<option value="C20">C20 管理學院</option>
										<option value="C30">C30 農業暨自然資源學院</option>
										<option value="U11">U11 中國文學系學士班</option>
										<option value="U12">U12 外國語文學系學士班</option>
										<option value="U13">U13 歷史學系學士班</option>
										<option value="U21">U21 財務金融學系學士班</option>
										<option value="U23">U23 企業管理學系學士班</option>
										<option value="U24">U24 法律學系學士班</option>
										<option value="U28">U28 會計學系學士班</option>
										<option value="U29">U29 資訊管理學系學士班</option>
										<option value="U30F">U30F 景觀與遊憩學士學位學程</option>
										<option value="U30G">U30G 生物科技學士學位學程</option>
										<option value="U30H">U30H 國際農企業學士學位學程</option>
										<option value="U31">U31 農藝學系學士班</option>
										<option value="U32">U32 園藝學系學士班</option>
										<option value="U33A">U33A 森林學系林學組學士班</option>
										<option value="U33B">U33B 森林學系木材科學組學士班</option>
										<option value="U34">U34 應用經濟學系學士班</option>
										<option value="U35">U35 植物病理學系學士班</option>
										<option value="U36">U36 昆蟲學系學士班</option>
										<option value="U37">U37 動物科學系學士班</option>
										<option value="U38A">U38A 獸醫學系學士班</option>
										<option value="U38B">U38B 獸醫學系學士班</option>
										<option value="U39">U39 土壤環境科學系學士班</option>
										<option value="U40">U40 生物產業機電工程學系學士班</option>
										<option value="U42">U42 水土保持學系學士班</option>
										<option value="U43">U43 食品暨應用生物科技學系學士班</option>
										<option value="U44">U44 行銷學系學士班</option>
										<option value="U51">U51 化學系學士班</option>
										<option value="U52">U52 生命科學系學士班</option>
										<option value="U53A">U53A 應用數學系學士班</option>
										<option value="U53B">U53B 應用數學系學士班</option>
										<option value="U54A">U54A 物理學系一般物理組學士班</option>
										<option value="U54B">U54B 物理學系光電物理組學士班</option>
										<option value="U56">U56 資訊科學與工程學系學士班</option>
										<option value="U60F">U60F 學士後太陽能光電系統應用學士學位學程</option>
										<option value="U61B">U61B 機械工程學系學士班</option>
										<option value="U61A">U61A 機械工程學系學士班</option>
										<option value="U62A">U62A 土木工程學系學士班</option>
										<option value="U62B">U62B 土木工程學系學士班</option>
										<option value="U63">U63 環境工程學系學士班</option>
										<option value="U64B">U64B 電機工程學系學士班</option>
										<option value="U64A">U64A 電機工程學系學士班</option>
										<option value="U65">U65 化學工程學系學士班</option>
										<option value="U66">U66 材料科學與工程學系學士班</option>
									</select>
								</div>
							<!--年級-->
								<div class="col-sm-2">
									<select class="form-control" id="v_level">
										<option value="0">年級</option>
										<option value="1">一年級</option>
										<option value="2">二年級</option>
										<option value="3">三年級</option>
										<option value="4">四年級</option>
										<option value="5">五年級</option>
									</select>
								</div>
								
								<button type="button" class="btn btn-default" id="OK_Button">確定</button>

						</div>
					</div>
				</div>
			</div>
		</div>
		<!--選取系級的表單結束-->

		<div class="container-fluid">  
				<div class="col-sm-9">
					<div class="table-responsive" id="time-table">
						<table class="table table-striped table-hover table-condensed table-bordered">
							<thead>
								<tr class="info">
									<th style="width: 1px">時間</th>
									<th style="width: 20%">一</th>
									<th style="width: 20%">二</th>
									<th style="width: 20%">三</th>
									<th style="width: 20%">四</th>
									<th style="width: 20%">五</th>
								</tr>
							</thead>
							<tbody>
								<tr data-hour="1" class="active">
									<th>08:10 - 09:00</th>
									<td></td>
									<td></td>
									<td></td>
									<td></td>
									<td></td>
								</tr>
								<tr data-hour="2" class="active">
									<th>09:10 - 10:00</th>
									<td></td>
									<td></td>
									<td></td>
									<td></td>
									<td></td>
								</tr>
								<tr data-hour="3" class="active">
									<th>10:10 - 11:00</th>
									<td></td>
									<td></td>
									<td></td>
									<td></td>
									<td></td>
								</tr>
								<tr data-hour="4" class="active">
									<th>11:10 - 12:00</th>
									<td></td>
									<td></td>
									<td></td>
									<td></td>
									<td></td>
								</tr>
								<tr data-hour="5" class="active">
									<th>13:10 - 14:00</th>
									<td></td>
									<td></td>
									<td></td>
									<td></td>
									<td></td>
								</tr>
								<tr data-hour="6" class="active">
									<th>14:10 - 15:00</th>
									<td></td>
									<td></td>
									<td></td>
									<td></td>
									<td></td>
								</tr>
								<tr data-hour="7" class="active">
									<th>15:10 - 16:00</th>
									<td></td>
									<td></td>
									<td></td>
									<td></td>
									<td></td>
								</tr>
								<tr data-hour="8" class="active">
									<th>16:10 - 17:00</th>
									<td></td>
									<td></td>
									<td></td>
									<td></td>
									<td></td>
								</tr>
							</tbody>
						</table>
					</div>
				</div>

				<!--會出現系選修和體育、通識-->
				<div class="col-sm-3" style="background-color:#D9EDF7">
					<div class="row" align="center">
						<div class="col-sm-4">
							<div class="checkbox">
								<label>
									<input type="checkbox" value="">本系選修
							  	</label>
							</div>
						</div>
						<div class="col-sm-4">
							<div class="checkbox">
								<label>
									<input type="checkbox" value="">通識課程
							  	</label>
							</div>
						</div>
						<div class="col-sm-4">
							<div class="checkbox">
								<label>
									<input type="checkbox" value="">體　　育
							  	</label>
							</div>
						</div>
						
						<select multiple class="form-control">
							<option>class1</option>
							<option>class1</option>
							<option>class1</option>
							<option>class1</option>
							<option>class1</option>
						</select>
					</div>
				</div>

			<!-- Button trigger modal -->
			<button type="button" class="btn btn-success btn-lg" data-toggle="modal" data-target="#myModal">
			  <span class="fa fa-question fa-2x"></span>
			</button>
			<button type="button" class="btn btn-info btn-lg" id="Clear_Button">
			  <p>Clear</p>
			</button>

			<!-- Modal -->
			<div class="modal fade modal fade bs-example-modal-lg" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
			  <div class="modal-dialog modal-lg">
			    <div class="modal-content">
			      <div class="modal-header">
			        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
			        <h4 class="modal-title" id="myModalLabel">使用說明</h4>
			      </div>
			      <div class="modal-body">
					<!--杜杰的圖片輪播-->
					<div class="container-fluid">
						<div class="row">
							<div id="carousel-example-generic" class="carousel slide" data-ride="carousel">
						    <!-- Indicators -->
						        <ol class="carousel-indicators">
									<li data-target="#carousel-example-generic" data-slide-to="0" class="active"></li>
									<li data-target="#carousel-example-generic" data-slide-to="1"></li>
									<li data-target="#carousel-example-generic" data-slide-to="2"></li>
						        </ol>

						    	<!-- Wrapper for slides -->
						    	<div id="carousel-example-generic" class="carousel slide" data-ride="carousel">
						          <!-- Indicators -->
									<ol class="carousel-indicators">
										<li data-target="#carousel-example-generic" data-slide-to="0" class="active"></li>
										<li data-target="#carousel-example-generic" data-slide-to="1"></li>
										<li data-target="#carousel-example-generic" data-slide-to="2"></li>
									</ol>

						          <!-- Wrapper for slides -->
						          	<div class="carousel-inner" role="listbox">
						                <div class="item active">
											<div align="center">
												<img src="images/test5.jpg" style="width:100%; height:100%">
											</div>
											<div class="carousel-caption">
						                    	<h3>Test1</h3>
						                	</div>
						            	</div>

						                <div class="item">
											<div align="center">
												<img src="images/test4.jpg" style="width:100%; height:100%">
											</div>
											<div class="carousel-caption">
												<h3>Test2</h3>
											</div>
						                </div>

										<div class="item">
											<div align="center">
												<img src="images/test6.jpg" style="width:100%; height:100%">
											</div>
											<div class="carousel-caption">
												<h3>Test3</h3>
											</div>
										</div>
									</div>
									<!-- Controls -->
									<a class="left carousel-control" href="#carousel-example-generic" role="button" data-slide="prev">
										<span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>
										<span class="sr-only">Previous</span>
									</a>
									<a class="right carousel-control" href="#carousel-example-generic" role="button" data-slide="next">
										<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span>
										<span class="sr-only">Next</span>
									</a>
						        </div>
						 	</div>
						</div>
					</div>
					<!--杜杰的圖片結束-->
			      </div>
			      <div class="modal-footer">
			        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
			      </div>
			    </div>
			  </div>
			</div>

		</div>

	    	<!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
	    <script>

		    (function(d, s, id) {
			    var js, fjs = d.getElementsByTagName(s)[0];
			    if (d.getElementById(id)) return;
			    js = d.createElement(s);
			    js.id = id;
			    js.src = "//connect.facebook.net/zh_TW/all.js#xfbml=1";
			    fjs.parentNode.insertBefore(js, fjs);
			}(document, 'script', 'facebook-jssdk'));


			(function($){
				//先定義JQuery為$，不要讓它衝突
				var courses = null;
				$(function(){
					//當文件準備好的時候，讀入json檔
					$.getJSON('json/nchu_U56.json', function(json)
					{
						courses = json.course;
						//把json.course的物件存入courses變數裡
					});
					$('button#OK_Button').click(function()
					{
						add_course($('#time-table'),courses[0]);
					});
				});

				//window.add_course = function($target, course) {
				var add_course = function($target, course) {		//假設target為time-table的參數，course為courses的某一個課程
					var $cell = $($.parseHTML('<div><div class="title"></div><div class="row"><div class="professor col-xs-6"></div><div class="location col-xs-6"></div></div></div>'));
					
					for (i = 0; i < 4; i++) 
					{
						for (j = 0; j < 7; j++)
						{
							var $td = $target.find('tr[data-hour=' + j + '] td:eq(' + i + ')');
    						$td.html($cell.html());							
    					}
					}

					if( !$.isArray(course.time_parsed) )
						throw 'time_parsed error';		//判斷time-parse是不是陣列
					if( $.type(course.title) !== "string" )			//判斷課程是不是字串	
						throw 'title error';
					var tmp = course.title.split(' ');		//切割課程名稱，遇到空格就切開
					course.title_short = tmp[0];		//title_short是會自動宣告的區域變數，存沒有英文的課名
					// console.log(course.title_short);
					$.each(course.time_parsed, function(ik, iv){		//each是for迴圈 time-parsed[{...}, {...}] ，以微積分為例:一個{"day"+"time"}就是陣列的一格，所以ik為0~1(兩次)
						$.each(iv.time, function(jk, jv){		//同上，iv.time為"time"的陣列{3,4}，jk為0~1、jv為3~4(節數)
							var $td = $target.find('tr[data-hour=' + jv + '] td:eq(' + (iv.day-1) + ')');		//td:eq()為搜尋td的陣列索引值 找到課程的時間 iv.day為星期，但因為td為陣列所以iv.day要減一
							// console.log($td[0]);

							//把上面的html格式匯入找到的td type中(parseHtml把後面的包裝成dom，再用一個$包裝成jQuery物件)
							// console.log($cell[0]);
							$cell.find('.title').text(course.title_short).end()		//將對應的課程內容寫入cell的html語法中，.title就是class="title"
							     .find('.professor').text(course.professor).end()//text()會把東西填入找到的class那裡，end()會回到var $cell那一行
							     .find('.location').text(course.location);

							// console.log($cell[0]);
							$td.html($cell.html());		//顯示課程
						})
					})
				}
			})(jQuery);

	    </script>
	</body>
</html>
